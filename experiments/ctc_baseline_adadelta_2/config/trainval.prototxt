model {
  ctc_recognition_model {
    feature_extractor {
      baseline_feature_extractor {
        conv_hyperparams {
          op: CONV
          initializer {
            variance_scaling_initializer {
            }
          }
          regularizer {
            l2_regularizer {
              weight: 0
            }
          }
          batch_norm {
          }
        }
        summarize_inputs: false
      }
    }

    bidirectional_rnn_cell {
      gru_cell {
        num_units: 256
      }
    }

    bidirectional_rnn_cell {
      gru_cell {
        num_units: 256
      }
    }

    label_map {
      character_set {
        text_string: "0123456789abcdefghijklmnopqrstuvwxyz"
        delimiter: ""
      }
      unk_label: 0
    }
  }
}

train_config {
  batch_size: 64

  data_augmentation_options {
    resize_image_random_method {
      target_height: 32
      target_width: 100
    }
  }
  data_augmentation_options {
    string_filtering {
      lower_case: true
      include_charset: "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
    }
  }

  keep_checkpoint_every_n_hours: 4

  optimizer {
    adadelta_optimizer {
      learning_rate {
        constant_learning_rate {
          learning_rate: 1.0
        }
      }
    }
  }
  gradient_clipping_by_norm: 5.0
  num_steps: 1500000
  bias_grad_multiplier: 2.0
  prefetch_queue_capacity: 100
  save_summaries_steps: 100
}

train_input_reader {
  tf_record_input_reader {
    input_path: "data/synth90k_all.tfrecord"
  }
}

eval_config: {
  metrics_set: "recognition_metrics"
  num_examples: 3000
  data_preprocessing_steps {
    resize_image {
      target_height: 32
      target_width: 100
    }
  }
  num_visualizations: 0
  visualization_export_dir: ""
}

eval_input_reader: {
  num_epochs: 1
  num_readers: 1
  shuffle: false

  tf_record_input_reader {
    input_path: "data/iiit5k_test.tfrecord"
  }
}
